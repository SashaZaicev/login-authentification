(this["webpackJsonplogin-authentification-ozitag"]=this["webpackJsonplogin-authentification-ozitag"]||[]).push([[0],{13:function(e,t,r){e.exports={formWrapper:"LoginForm_formWrapper__So2M-",headline:"LoginForm_headline__lqrsw",headlineText:"LoginForm_headlineText__k6Cj-",form:"LoginForm_form__ctPRN",formDescription:"LoginForm_formDescription__2WxVO",input:"LoginForm_input__ZEWA2",formBtnWrapper:"LoginForm_formBtnWrapper__TjhwS",formBtn:"LoginForm_formBtn__2M4ET"}},17:function(e,t,r){e.exports={wrapper:"UserPage_wrapper__2o_TZ",userBlock:"UserPage_userBlock__16ica",userInfo:"UserPage_userInfo__2vVGT",info:"UserPage_info__2nWai",logoutBtnWrapper:"UserPage_logoutBtnWrapper__xUE06",logoutBtn:"UserPage_logoutBtn__1bGIO"}},20:function(e,t,r){e.exports={inputWrapper:"Input_inputWrapper__1KzHy",superInput:"Input_superInput__1ydET",spanError:"Input_spanError__39jvQ"}},28:function(e,t,r){e.exports={default:"Button_default__27Ubw",red:"Button_red__seRSR"}},32:function(e,t,r){e.exports={errorWrapper:"Error_errorWrapper__2Egow",error:"Error_error__jH6pI"}},33:function(e,t,r){e.exports={preloaderWrapper:"Preloader_preloaderWrapper__2N9kZ",loader:"Preloader_loader__1Jav-",load1:"Preloader_load1__LtX7W"}},36:function(e,t,r){e.exports={app:"App_app__2mKl_"}},49:function(e,t,r){e.exports={wrapper:"LoginPage_wrapper__kxzfb",headline:"LoginPage_headline__3aNxx"}},80:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(22),s=r.n(c),o=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,82)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))},i=r(3),u=r(5),l=function(e){return e.authState.user},p=function(e){return e.authState.isLoggedIn},d=function(e){return e.appState.status},j=function(e){return e.appState.error},m=r(18),b=r.n(m),f=r(27),h=r(7),O={status:"idle",error:null},g="LAO/APP/SET_STATUS",_="LAO/APP/SET_ERROR",x=function(e){return{type:g,status:e}},v=function(e){return{type:_,error:e}},I=r(46),N=r.n(I).a.create({withCredentials:!1,baseURL:"https://tager.dev.ozitag.com",headers:{Accept:"application/json"}}),w=function(e){var t=localStorage.getItem("accessToken");return Boolean(t)?e.headers.Authorization="Bearer ".concat(t):delete e.headers.Authorization,e};N.interceptors.request.use(w);var E=function(e,t,r){return N.post("/api/auth/user",{clientId:e,email:t,password:r}).then((function(e){return e}))},L=function(){return N.post("/api/tager/user/profile/logout").then((function(e){return e}))},S=function(){return N.get("/api/tager/user/profile").then((function(e){return e}))},T="LAO/AUTH/SET_IS_LOGIN",k="LAO/AUTH/SET_USER_DATA",W={isLoggedIn:!1,user:{}},P=function(e){return{type:T,value:e}},y=function(){return function(){var e=Object(f.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x("loading")),e.prev=1,e.next=4,S();case 4:r=e.sent,t((a=r.data.data,{type:k,user:a})),t(P(!0)),t(x("success")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(v(e.t0.message)),t(x("unsuccessful"));case 14:case"end":return e.stop()}var a}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},A=r(51),B=r(26),C=r(20),U=r.n(C),R=r(1),F=function(e){var t=e.inputLabel,r=e.inputLabelName,a=(e.type,e.onChange),n=e.onChangeText,c=e.onKeyPress,s=e.onEnter,o=e.error,i=e.className,u=e.spanClassName,l=Object(B.a)(e,["inputLabel","inputLabelName","type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),p=i?"".concat(U.a.superInput," ").concat(i):U.a.superInput,d=u?"".concat(U.a.spanError," ").concat(u):U.a.spanError;return Object(R.jsxs)("div",{className:U.a.inputWrapper,children:[Object(R.jsx)("input",Object(h.a)({type:"text",id:r,onChange:function(e){a&&a(e),n&&n(e.currentTarget.value)},onKeyPress:function(e){c&&c(e),"Enter"===e.key&&s&&s()},className:p},l)),Object(R.jsxs)("label",{htmlFor:r,children:["*",t]}),o&&Object(R.jsx)("span",{className:d,children:o})]})},z=r(28),G=r.n(z),M=n.a.memo((function(e){var t=e.red,r=e.className,a=Object(B.a)(e,["red","className"]),n=t?"".concat(G.a.red," ").concat(G.a.default):"".concat(r," ").concat(G.a.default);return Object(R.jsx)("button",Object(h.a)({className:n},a))})),D=r(13),Z=r.n(D),q=function(e){var t={};return e.clientId?0===e.clientId.toString().length?t.clientId="Must be 1 characters or more":e.clientId.toString().length>5&&(t.clientId="Must be 10 characters or less"):t.clientId="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4?t.password="Must be 4 characters or more":e.password.length>10&&(t.password="Must be 10 characters or less"):t.password="Required",t},K=n.a.memo((function(e){var t=e.callback,r=Object(A.a)({initialValues:{clientId:1,email:"user@ozitag.com",password:"user"},validate:q,onSubmit:function(e,r){var a=r.setSubmitting;t(e),a(!1)}}),a=function(e,t,r,a,n,c,s,o,i,u){return Object(R.jsx)(F,{id:e,name:a,type:n,className:c,error:s,onChange:o,value:i,placeholder:u,inputLabelName:t,inputLabel:r})};return Object(R.jsxs)("div",{className:Z.a.formWrapper,children:[Object(R.jsx)("div",{className:Z.a.headline,children:Object(R.jsx)("h1",{className:Z.a.headlineText,children:"WELCOME TO TAG"})}),Object(R.jsxs)("div",{className:Z.a.form,children:[Object(R.jsx)("p",{className:Z.a.formDescription,children:"Sign in to TAG"}),Object(R.jsxs)("form",{onSubmit:r.handleSubmit,children:[a("clientId","clientId","Enter ID","clientId","text",Z.a.input,r.errors.clientId,r.handleChange,r.values.clientId,'Example: "1"'),a("email","email","Enter Email","email","text",Z.a.input,r.errors.email,r.handleChange,r.values.email,'Example: "user@ozitag.com"'),a("password","password","Enter Password","password","text",Z.a.input,r.errors.password,r.handleChange,r.values.password,'Example: "user"'),Object(R.jsx)("div",{className:Z.a.formBtnWrapper,children:Object(R.jsx)(M,{type:"submit",className:Z.a.formBtn,children:"Log in"})})]})]})]})})),H=r(32),J=r.n(H),V=n.a.memo((function(e){var t=e.error;return Object(R.jsx)("div",{className:J.a.errorWrapper,children:Object(R.jsx)("div",{className:J.a.error,children:t||""})})})),Q=r(33),X=r.n(Q),$=n.a.memo((function(){return Object(R.jsx)("div",{className:X.a.preloaderWrapper,children:Object(R.jsx)("div",{className:X.a.loader,children:"Loading..."})})})),Y=r(49),ee=r.n(Y),te=n.a.memo((function(){var e=Object(u.c)(d),t=Object(u.c)(j),r=Object(u.c)(p),n=Object(u.b)(),c=Object(a.useCallback)((function(e){var t=e.clientId,r=e.email,a=e.password;n(function(e,t,r){return function(){var a=Object(f.a)(b.a.mark((function a(n){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(x("loading")),a.prev=1,a.next=4,E(e,t,r);case 4:c=a.sent,localStorage.setItem("accessToken",c.data.data.accessToken),localStorage.setItem("refreshToken",c.data.data.refreshToken),n(P(!0)),n(v("")),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),n(v(a.t0.message)),n(x("unsuccessful"));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,r,a))}),[]);return r?Object(R.jsx)(i.a,{to:oe.USER}):Object(R.jsx)("div",{className:ee.a.wrapper,children:"loading"===e?Object(R.jsx)($,{}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(K,{callback:c}),t&&Object(R.jsx)(V,{error:t})]})})})),re=r(17),ae=r.n(re),ne=n.a.memo((function(){var e=Object(u.c)(l),t=e.email,r=e.name,n=Object(u.c)(d),c=Object(u.c)(j),s=Object(u.c)(p),o=Object(a.useCallback)((function(){m(function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x("loading")),e.prev=1,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t(x("success")),t(P(!1)),t(v("")),e.next=9,L();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t(v(e.t0.message)),t(x("unsuccessful"));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),m=Object(u.b)();return Object(a.useEffect)((function(){m(y())}),[]),s?Object(R.jsx)("div",{className:ae.a.wrapper,children:"loading"===n?Object(R.jsx)($,{}):Object(R.jsxs)("div",{className:ae.a.userBlock,children:[Object(R.jsxs)("div",{className:ae.a.userInfo,children:[Object(R.jsx)("div",{className:ae.a.info,children:t}),Object(R.jsx)("div",{className:ae.a.info,children:r})]}),s&&Object(R.jsx)("div",{className:ae.a.logoutBtnWrapper,children:Object(R.jsx)(M,{onClick:o,className:ae.a.logoutBtn,children:"LOGOUT"})}),c&&Object(R.jsx)(V,{error:c})]})}):Object(R.jsx)(i.a,{to:oe.LOGIN})})),ce=r(36),se=r.n(ce),oe={LOGIN:"/login",USER:"/user"},ie=function(){var e=Object(u.b)();return Object(a.useEffect)((function(){localStorage.getItem("accessToken")&&e(y())}),[]),Object(R.jsx)("div",{className:se.a.app,children:Object(R.jsx)("div",{className:se.a.content,children:Object(R.jsxs)(i.d,{children:[Object(R.jsx)(i.b,{path:"/",exact:!0,render:function(){return Object(R.jsx)(i.a,{to:oe.USER})}}),Object(R.jsx)(i.b,{path:oe.LOGIN,exact:!0,render:function(){return Object(R.jsx)(te,{})}}),Object(R.jsx)(i.b,{path:oe.USER,exact:!0,render:function(){return Object(R.jsx)(ne,{})}})]})})})},ue=r(21),le=r(29),pe=r(50),de=Object(le.b)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(h.a)(Object(h.a)({},e),{},{status:t.status});case _:return Object(h.a)(Object(h.a)({},e),{},{error:t.error});default:return e}},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:t.value});case k:return Object(h.a)(Object(h.a)({},e),{},{user:t.user});default:return e}}}),je=Object(le.c)(de,Object(le.a)(pe.a));r(80);s.a.render(Object(R.jsx)(ue.a,{children:Object(R.jsx)(u.a,{store:je,children:Object(R.jsx)(ie,{})})}),document.getElementById("root")),o()}},[[81,1,2]]]);
//# sourceMappingURL=main.1af25f26.chunk.js.map